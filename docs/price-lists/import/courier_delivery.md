# Указание стоимости курьерской доставки в прайс-листе

**Для задания стоимости курьерской доставки в регионы следует использовать Тарифную сетку в личном кабинете магазина.**

**Используются регионы доставки из опубликованной тарифной сетки.**
**В случае изменения регионов доставки Вы должны следить за актуальностью регионов, передаваемых в прайс-листе. В случае несоответствия стоимость доставки будет вычисляться по опубликованной тарифной сетке!**

**Задание стоимости курьерской доставки в прайс-листе возможно, но следует использовать лишь для редких частных случаев, так как это значительно снижает скорость обработки прайс-листа.**

**Скорость обработки прайс-листа снижается при увеличении количества передаваемых в прайс-листе регионов.**

Для поддержки курьерской доставки в прайс-листе необходимо настроить регионы доставки в Тарифной сетке в личном кабинете.

Количество настроенных регионов никак не влияет на скорость обработки прайс-листа.

Передавать стоимость доставки можно в любом формате прайс-листа.

Для передачи в формате CSV в качестве названия колонки следует использовать строку "Курьерская доставка в _НАЗВАНИЕ_РЕГИОНА_ИЗ_ТАРИФНОЙ_СЕТКИ_"

Для передачи в форматах XML и JSON в качестве идентификатора региона доставки следует исользовать мнемонику региона доставки.
Мнемоника доступна в Тарифной сетке и уникальна для каждого региона доставки.

Вы должны передавать **только** те значения, которые должны быть приоритетнее Тарифной сетки.

Если для какого-то ценового предложения или для какого-то региона доставки в прайс-листе не задана специальная стоимость, то она будет расчситана исходя из настроек Тарифной сетки

Стоимость курьерской доставки передается в таком же формате, как и стоимость предложения.
 
Валютой для стоимости курьерской доставки используется валюта цены предложения

Сроки доставки будут работать по старой логике - из полей `deliveryTownTime` и `deliveryCountryTime`.

До окончательного заполнения Тарифной сетки всеми магазинами и запуска новой версии мобильных приложений Вы должны передавать поля `deliveryTownPrice` и `deliveryCountryPrice` в старом формате.
Они никак не связаны с новой тарифной сеткой и ответственность за их наполнение лежит на Вас.

### JSON

В каждый объект ценового предложения по ключу `courierDeliveryPrices` можно добавить вложенный объект, в котором можно разместить любое количество объектов.
Где ключом объекта должна являться мнемоника региона доставки, а сам объект описывает стоимость доставки.

Пример:

```json
[
    ...
    {
        ...
        "courierDeliveryPrices": {
            "region-1": {
                "type": "custom",
                "amount": "2.99"
            },
            "region-2": {
                "type": "no"
            },
            "region-3": {
                "type": "free"
            },
            "region-4": {
                "type": "default"
            }
        }
        ...
    }
    ...
]
```

### XML

В формате XML основное отличие лишь в том, что регион доставки передается как вложенный элемент, а не как ключ.

Пример:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<price-list version="1.0">
    <items-list>
        ...
        <item>
            ...
            <courierDeliveryPrices>
                <item>
                    <region>region-1</region>
                    <type>custom</type>
                    <amount>2.99</amount>
                </item>
                <item>
                    <region>region-2</region>
                    <type>no</type>
                </item>
                <item>
                    <region>region-3</region>
                    <type>free</type>
                </item>
                <item>
                    <region>region-4</region>
                    <type>default</type>
                </item>
            </courierDeliveryPrices>
            ...
        </item>
        ...
    </items-list>
</price-list>
```

### CSV

```csv
...;Курьерская доставка в Регион 1;Курьерская доставка в Регион 2;Курьерская доставка в Регион 3;Курьерская доставка в Регион 4;...
...;2.99;Нет доставки;Бесплатная доставка;Общий тариф;...
```

## Допустимые значения стоимости курьерской доставки
 
|Значение в ячейке в CSV формате|Тип объекта в JSON и XML форматах|Описание|
|---|---|---|
|NN.NN|`custom`|Заданная стоимость доставки для данной позиции в регион|
|Нет доставки|`no`|Доставка данной позиции в указанный регион не осуществляется|
|Бесплатная доставка|`free`|Данная позиция доставляется в указанный регион бесплатно|
|Общий тариф|`default`|В качестве стоимости доставки в регион, указанный в колонке, будет использоваться Общий тариф из Тарифной сетки|
